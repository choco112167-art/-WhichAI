"""

- 기능: 사용자 입력 → 작업 카테고리 분류(키워드 규칙) → 카테고리별 대표 AI 도구 추천
- 카테고리:
    meeting_summary   : 회의/기록
    document_writing  : 문서/글쓰기
    image_generation  : 이미지 생성
    video             : 동영상 생성/편집
    coding_automation : 코드/자동화
    ppt_design        : PPT 및 디자인
    research          : 리서치/검색
"""

from typing import List, Dict

# 1. 카테고리별 추천 AI 도구 정보 정의
ai_tools: Dict[str, List[Dict[str, str]]] = {
    # 회의/기록
    "meeting_summary": [
        {
            "name": "클로바노트",
            "desc": "한국어 회의 녹음 자동 전사 및 요약 도구",
            "strength": "국내 회의 환경(한국어 음성)에 최적화"
        },
        {
            "name": "Notion AI",
            "desc": "노션 문서·회의록 요약 및 정리",
            "strength": "노션 워크스페이스와 자연스럽게 통합"
        },
        {
            "name": "Notta",
            "desc": "화상회의 전사 및 요약 도구",
            "strength": "Zoom·Meet 등 주요 회의 플랫폼 지원"
        }
    ],

    # 글쓰기 및 전반적인 작업
    "document_writing": [
        {
            "name": "ChatGPT",
            "desc": "리포트/에세이 초안 작성 및 문장 다듬기",
            "strength": "범용 글쓰기와 아이디어 브레인스토밍에 강점"
        },
        {
            "name": "Claude",
            "desc": "긴 문서 이해 및 개요 정리에 특화된 LLM",
            "strength": "장문 텍스트 요약·재구성에 유리"
        },
        {
            "name": "Le Chat",
            "desc": "일반 대화 및 문서 작성 보조 LLM",
            "strength": "여러 언어를 지원하는 범용 어시스턴트"
        },
        {
            "name": "코파일럿(MS Copilot)",
            "desc": "Office 작업 보조 AI",
            "strength": "Word·PowerPoint·Excel과 통합된 문서 작업에 적합"
        }
    ],

    # 이미지 생성
    "image_generation": [
        {
            "name": "FLUX",
            "desc": "고품질 이미지 생성 모델",
            "strength": "디테일이 필요한 일러스트·아트워크에 적합"
        },
        {
            "name": "Ideogram",
            "desc": "텍스트가 포함된 이미지 생성",
            "strength": "포스터·타이포그래피 이미지에 강함"
        },
        {
            "name": "ImageFX",
            "desc": "구글 계열 이미지 생성 도구",
            "strength": "간단한 프롬프트로 빠르게 시안 생성"
        },
        {
            "name": "미드저니(Midjourney)",
            "desc": "디스코드 기반 고품질 이미지 생성",
            "strength": "예술적 스타일 이미지에 강점"
        }
    ],

    # 동영상 생성·편집
    "video": [
        {
            "name": "CapCut",
            "desc": "템플릿 기반 동영상 편집 도구",
            "strength": "쇼츠·틱톡 스타일 영상 제작에 적합"
        },
        {
            "name": "Vrew",
            "desc": "자막 자동 생성 및 편집 도구",
            "strength": "자막 작업과 간단 편집에 특화"
        },
        {
            "name": "Veed",
            "desc": "온라인 동영상 편집 및 텍스트 기반 편집",
            "strength": "브라우저에서 바로 영상 제작 가능"
        },
        {
            "name": "Runway",
            "desc": "AI 기반 영상 생성·편집 도구",
            "strength": "텍스트→영상, 배경 제거 등 AI 기능 제공"
        }
    ],

    # 코드/자동화
    "coding_automation": [
        {
            "name": "Cursor",
            "desc": "AI 통합 코드 에디터",
            "strength": "코드 이해·완성·리팩터링에 강점"
        },
        {
            "name": "Windsurf",
            "desc": "AI 보조 개발 환경",
            "strength": "프로젝트 단위 맥락 이해 및 코드 생성"
        },
        {
            "name": "Replit",
            "desc": "온라인 IDE + AI 코드 보조",
            "strength": "브라우저에서 빠르게 코드 작성·실행"
        },
        {
            "name": "Dify",
            "desc": "워크플로우 자동화·에이전트 빌더",
            "strength": "여러 도구를 연결해 자동화 파이프라인 구성"
        }
    ],

    # PPT 및 디자인 작업
    "ppt_design": [
        {
            "name": "Canva",
            "desc": "프레젠테이션·썸네일·SNS 디자인 도구",
            "strength": "템플릿 기반으로 빠르게 결과물을 제작"
        },
        {
            "name": "Gamma",
            "desc": "AI 프레젠테이션 생성 도구",
            "strength": "텍스트에서 슬라이드를 자동 생성"
        },
        {
            "name": "AIPPT",
            "desc": "AI 기반 PPT 제작 도구",
            "strength": "한글 사용자 친화적인 인터페이스"
        },
        {
            "name": "Figma",
            "desc": "UI/UX 및 디자인 툴",
            "strength": "협업과 프로토타이핑에 강점"
        }
    ],

    # 리서치 및 검색
    "research": [
        {
            "name": "Perplexity",
            "desc": "AI 기반 검색·리서치 어시스턴트",
            "strength": "출처와 함께 답변을 제공하는 조사 작업에 적합"
        },
        {
            "name": "Genspark",
            "desc": "연구용 AI 검색 도구",
            "strength": "논문·자료 조사에 특화된 검색 기능"
        },
        {
            "name": "NotebookLM",
            "desc": "문서 기반 연구·요약 도구",
            "strength": "업로드한 자료를 바탕으로 Q&A·요약 수행"
        }
    ]
}


# 2. 규칙 기반 작업 분류기 (키워드 → 카테고리)

KEYWORDS_TO_CATEGORY = {
    # 회의/기록
    "회의": "meeting_summary",
    "미팅": "meeting_summary",
    "회의록": "meeting_summary",
    "녹음": "meeting_summary",
    "기록": "meeting_summary",
    "노트": "meeting_summary",

    # 문서/글쓰기
    "리포트": "document_writing",
    "보고서": "document_writing",
    "에세이": "document_writing",
    "글쓰기": "document_writing",
    "문장": "document_writing",
    "자기소개서": "document_writing",
    "문서": "document_writing",

    # 이미지
    "이미지": "image_generation",
    "그림": "image_generation",
    "포스터": "image_generation",
    "썸네일": "image_generation",
    "사진": "image_generation",

    # 동영상
    "영상": "video",
    "동영상": "video",
    "쇼츠": "video",
    "틱톡": "video",
    "유튜브": "video",

    # 코드/자동화
    "코드": "coding_automation",
    "코딩": "coding_automation",
    "프로그래밍": "coding_automation",
    "자동화": "coding_automation",
    "스크립트": "coding_automation",
    "봇": "coding_automation",

    # PPT/디자인
    "PPT": "ppt_design",
    "ppt": "ppt_design",
    "발표자료": "ppt_design",
    "슬라이드": "ppt_design",
    "디자인": "ppt_design",
    "배너": "ppt_design",

    # 리서치/검색
    "검색": "research",
    "리서치": "research",
    "조사": "research",
    "자료조사": "research",
    "논문": "research"
}


def classify_task(user_text: str) -> str:
    """사용자 입력을 보고 작업 카테고리를 간단히 분류하는 함수 (규칙 기반).
    일치하는 키워드가 없으면 기본값으로 document_writing을 사용.
    """
    text = user_text.strip()
    for keyword, category in KEYWORDS_TO_CATEGORY.items():
        if keyword in text:
            return category
    return "document_writing"  # 기본값


# 3. 카테고리별 도구 추천 함수

def recommend_tools(category: str) -> List[Dict[str, str]]:
    """카테고리에 해당하는 AI 도구 리스트 반환.
    정의되지 않은 카테고리면 빈 리스트 반환.
    """
    return ai_tools.get(category, [])


# 4. 전체 흐름 실행 함수 (입력 → 분류 → 추천 → 출력)

def run_whichai_once():
    print("===== WhichAI =====")
    user_text = input("현재 하고 싶은 작업 상황을 자연어로 입력하세요:\n> ")

    # 1) 작업 카테고리 분류
    category = classify_task(user_text)

    # 2) 도구 추천
    tools = recommend_tools(category)

    # 3) 결과 출력
    print("\n[판단된 작업 카테고리]")
    print(f"- {category}")

    if not tools:
        print("\n[추천 결과]\n- 현재 카테고리에 매핑된 도구가 없습니다. 카테고리/키워드를 확장해 주세요.")
        return

    print("\n[추천 AI 도구]")
    for i, tool in enumerate(tools, start=1):
        print(f"{i}. {tool['name']}")
        print(f"   - 설명: {tool['desc']}")
        print(f"   - 강점: {tool['strength']}\n")


if __name__ == "__main__":
    
    run_whichai_once()
